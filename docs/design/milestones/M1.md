# M1 Detailed Design — mcp-devhatchery

Scope: spawn per-owner dev containers, streamed shell.exec, fs.* ops, Exports + Mount Broker, list/continue/reattach, and lifecycle events.

## Tools
- shell.exec: command|string[], stdin_b64?, timeout_sec?, workdir?, env? → {exit_code, stdout_b64, stderr_b64}.
- fs.*: stat, listdir, read, write, rm, mkdir (Roots enforcement).
- list/continue/reattach: containers.list, volumes.list, snapshots.list, containers.reattach.
- exports.create + Mount Broker.

## Events
Envelope: {type, owner, ts, data}. Types: spawn.ready, container.started|stopped|exec.log|exec.end, export.created.

## Errors
RootsViolation, NotFound, BackendUnavailable, InvalidArgument → {code,message,details?}.

## Readiness
Pre-pull image + attach_or_spawn ok → emit spawn.ready.
